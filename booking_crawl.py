from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.common.exceptions import TimeoutException
from bs4 import BeautifulSoup
import time

browser = webdriver.Chrome('C:\Users\kavya\Downloads\chromedriver_win32\chromedriver.exe') #replace with .Firefox(), or with the browser of your choice
url = [  #LAS VEGAS SITES
        "https://www.booking.com/searchresults.html?label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATHCAQp3aW5kb3dzIDEwyAEM2AED6AEB-AECkgIBeagCAw;sid=32dfd6f595a7a3e6f4c1e92bc57faec1;checkin_monthday=26&checkin_year_month=2018-04&checkout_monthday=27&checkout_year_month=2018-04&dest_id=20079110&dest_type=city&from_history=1&group_adults=2&group_children=0&no_rooms=1&si=ad&si=ai&si=ci&si=co&si=di&si=la&si=re&;sh_position=1",
       "https://www.booking.com/searchresults.html?label=gen173nr-1FCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATHCAQp3aW5kb3dzIDEwyAEM2AEB6AEB-AECkgIBeagCAw&sid=6b8c44375c385e19a40f765e54a53033&checkin_monthday=26&checkin_year_month=2018-04&checkout_monthday=27&checkout_year_month=2018-04&class_interval=1&dest_id=20079110&dest_type=city&dtdisc=0&from_history=1&group_adults=2&group_children=0&inac=0&index_postcard=0&label_click=undef&no_rooms=1&postcard=0&raw_dest_type=city&room1=A%2CA&sb_price_type=total&si=ai&si=ci&si=co&si=di&si=la&si=re&ss_all=0&ssb=empty&sshis=0&rows=16&offset=16",
       'https://www.booking.com/searchresults.html?aid=304142&label=gen173nr-1FCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATHCAQp3aW5kb3dzIDEwyAEM2AEB6AEB-AECkgIBeagCAw&sid=6b8c44375c385e19a40f765e54a53033&checkin_monthday=26&checkin_year_month=2018-04&checkout_monthday=27&checkout_year_month=2018-04&class_interval=1&dest_id=20079110&dest_type=city&from_history=1&group_adults=2&group_children=0&label_click=undef&no_rooms=1&raw_dest_type=city&room1=A%2CA&sb_price_type=total&si=ai&si=ci&si=co&si=di&si=la&si=re&ssb=empty&rows=16&offset=32',
       'https://www.booking.com/searchresults.html?aid=304142&label=gen173nr-1FCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATHCAQp3aW5kb3dzIDEwyAEM2AEB6AEB-AECkgIBeagCAw&sid=6b8c44375c385e19a40f765e54a53033&checkin_monthday=26&checkin_year_month=2018-04&checkout_monthday=27&checkout_year_month=2018-04&class_interval=1&dest_id=20079110&dest_type=city&dtdisc=0&from_history=1&group_adults=2&group_children=0&inac=0&index_postcard=0&label_click=undef&no_rooms=1&postcard=0&raw_dest_type=city&room1=A%2CA&sb_price_type=total&si=ai&si=ci&si=co&si=di&si=la&si=re&ss_all=0&ssb=empty&sshis=0&rows=16&offset=48',
       'https://www.booking.com/searchresults.html?aid=304142&label=gen173nr-1FCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATHCAQp3aW5kb3dzIDEwyAEM2AEB6AEB-AECkgIBeagCAw&sid=6b8c44375c385e19a40f765e54a53033&checkin_monthday=26&checkin_year_month=2018-04&checkout_monthday=27&checkout_year_month=2018-04&class_interval=1&dest_id=20079110&dest_type=city&from_history=1&group_adults=2&group_children=0&label_click=undef&no_rooms=1&raw_dest_type=city&room1=A%2CA&sb_price_type=total&si=ai&si=ci&si=co&si=di&si=la&si=re&ssb=empty&rows=16&offset=64',

    #LOS ANGELES
        'https://www.booking.com/searchresults.html?label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID;sid=6b8c44375c385e19a40f765e54a53033;checkin_month=4&checkin_monthday=26&checkin_year=2018&checkout_month=4&checkout_monthday=27&checkout_year=2018&class_interval=1&dest_id=20014181&dest_type=city&dtdisc=0&from_sf=1&group_adults=2&group_children=0&inac=0&index_postcard=0&label_click=undef&no_rooms=1&offset=0&postcard=0&raw_dest_type=city&room1=A%2CA&sb_price_type=total&src=index&src_elem=sb&ss=Los%20ANgeles&ss_all=0&ssb=empty&sshis=0&ssne=Las%20Vegas&ssne_untouched=Las%20Vegas&',
        'https://www.booking.com/searchresults.html?label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID&sid=6b8c44375c385e19a40f765e54a53033&checkin_month=4&checkin_monthday=26&checkin_year=2018&checkout_month=4&checkout_monthday=27&checkout_year=2018&class_interval=1&dest_id=20014181&dest_type=city&from_sf=1&group_adults=2&group_children=0&label_click=undef&no_rooms=1&raw_dest_type=city&room1=A%2CA&sb_price_type=total&src=index&src_elem=sb&ss=Los%20ANgeles&ssb=empty&ssne_untouched=Las%20Vegas&rows=20&offset=20',
        'https://www.booking.com/searchresults.html?aid=304142&label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID&sid=6b8c44375c385e19a40f765e54a53033&checkin_month=4&checkin_monthday=26&checkin_year=2018&checkout_month=4&checkout_monthday=27&checkout_year=2018&class_interval=1&dest_id=20014181&dest_type=city&dtdisc=0&from_sf=1&group_adults=2&group_children=0&inac=0&index_postcard=0&label_click=undef&no_rooms=1&postcard=0&raw_dest_type=city&room1=A%2CA&sb_price_type=total&src=index&src_elem=sb&ss=Los%20ANgeles&ss_all=0&ssb=empty&sshis=0&ssne_untouched=Las%20Vegas&rows=20&offset=40',
        'https://www.booking.com/searchresults.html?aid=304142&label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID&sid=6b8c44375c385e19a40f765e54a53033&checkin_month=4&checkin_monthday=26&checkin_year=2018&checkout_month=4&checkout_monthday=27&checkout_year=2018&class_interval=1&dest_id=20014181&dest_type=city&from_sf=1&group_adults=2&group_children=0&label_click=undef&no_rooms=1&raw_dest_type=city&room1=A%2CA&sb_price_type=total&src=index&src_elem=sb&ss=Los%20ANgeles&ssb=empty&ssne_untouched=Las%20Vegas&rows=20&offset=60',
        'https://www.booking.com/searchresults.html?aid=304142&label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID&sid=6b8c44375c385e19a40f765e54a53033&checkin_month=4&checkin_monthday=26&checkin_year=2018&checkout_month=4&checkout_monthday=27&checkout_year=2018&class_interval=1&dest_id=20014181&dest_type=city&dtdisc=0&from_sf=1&group_adults=2&group_children=0&inac=0&index_postcard=0&label_click=undef&no_rooms=1&postcard=0&raw_dest_type=city&room1=A%2CA&sb_price_type=total&src=index&src_elem=sb&ss=Los%20ANgeles&ss_all=0&ssb=empty&sshis=0&ssne_untouched=Las%20Vegas&rows=20&offset=80',

    #San Diego
        'https://www.booking.com/searchresults.html?label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID&sid=6b8c44375c385e19a40f765e54a53033&sb=1&src=searchresults&src_elem=sb&error_url=https%3A%2F%2Fwww.booking.com%2Fsearchresults.html%3Flabel%3Dgen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID%3Bsid%3D6b8c44375c385e19a40f765e54a53033%3Bcheckin_month%3D4%3Bcheckin_monthday%3D26%3Bcheckin_year%3D2018%3Bcheckout_month%3D4%3Bcheckout_monthday%3D27%3Bcheckout_year%3D2018%3Bclass_interval%3D1%3Bdest_id%3D20014181%3Bdest_type%3Dcity%3Bfrom_sf%3D1%3Bgroup_adults%3D2%3Bgroup_children%3D0%3Blabel_click%3Dundef%3Bno_rooms%3D1%3Boffset%3D0%3Braw_dest_type%3Dcity%3Broom1%3DA%252CA%3Bsb_price_type%3Dtotal%3Bsrc%3Dindex%3Bsrc_elem%3Dsb%3Bss%3DLos%2520ANgeles%3Bssb%3Dempty%3Bssne_untouched%3DLas%2520Vegas%26%3B&ac_presel=0&ss=San+Diego%2C+California%2C+USA&ssne=Los+Angeles&ssne_untouched=Los+Angeles&city=20014181&checkin_month=4&checkin_monthday=26&checkin_year=2018&checkout_month=4&checkout_monthday=27&checkout_year=2018&group_adults=2&group_children=0&no_rooms=1&from_sf=1&ss_raw=San+Diego&ac_position=0&ac_langcode=en&dest_id=20015725&dest_type=city&place_id_lat=32.712463&place_id_lon=-117.161034&search_pageview_id=773d161742750119&search_selected=true&dest_id=20015725&dest_type=city&place_id_lat=32.712463&place_id_lon=-117.161034&search_pageview_id=773d161742750119&search_selected=true&dest_id=20015725&dest_type=city&place_id_lat=32.712463&place_id_lon=-117.161034&search_pageview_id=773d161742750119&search_selected=true&search_pageview_id=773d161742750119&ac_suggestion_list_length=5&ac_suggestion_theme_list_length=0',
        'https://www.booking.com/searchresults.html?aid=304142&label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID&sid=6b8c44375c385e19a40f765e54a53033&checkin_month=4&checkin_monthday=26&checkin_year=2018&checkout_month=4&checkout_monthday=27&checkout_year=2018&city=20014181&class_interval=1&dest_id=20015725&dest_id=20015725&dest_id=20015725&dest_type=city&dest_type=city&dest_type=city&dtdisc=0&from_sf=1&group_adults=2&group_children=0&inac=0&index_postcard=0&label_click=undef&no_rooms=1&postcard=0&raw_dest_type=city&raw_dest_type=city&raw_dest_type=city&room1=A%2CA&sb_price_type=total&search_selected=1&search_selected=1&search_selected=1&src=searchresults&src_elem=sb&ss=San%20Diego%2C%20California%2C%20USA&ss_all=0&ss_raw=San%20Diego&ssb=empty&sshis=0&ssne_untouched=Los%20Angeles&rows=50&offset=50',
        'https://www.booking.com/searchresults.html?aid=304142&label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID&sid=6b8c44375c385e19a40f765e54a53033&checkin_month=4&checkin_monthday=26&checkin_year=2018&checkout_month=4&checkout_monthday=27&checkout_year=2018&city=20014181&class_interval=1&dest_id=20015725&dest_id=20015725&dest_id=20015725&dest_type=city&dest_type=city&dest_type=city&from_sf=1&group_adults=2&group_children=0&label_click=undef&no_rooms=1&raw_dest_type=city&raw_dest_type=city&raw_dest_type=city&room1=A%2CA&sb_price_type=total&search_selected=1&search_selected=1&search_selected=1&src=searchresults&src_elem=sb&ss=San%20Diego%2C%20California%2C%20USA&ss_raw=San%20Diego&ssb=empty&ssne_untouched=Los%20Angeles&rows=50&offset=100',
        'https://www.booking.com/searchresults.html?aid=304142&label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID&sid=6b8c44375c385e19a40f765e54a53033&checkin_month=4&checkin_monthday=26&checkin_year=2018&checkout_month=4&checkout_monthday=27&checkout_year=2018&city=20014181&class_interval=1&dest_id=20015725&dest_id=20015725&dest_id=20015725&dest_type=city&dest_type=city&dest_type=city&dtdisc=0&from_sf=1&group_adults=2&group_children=0&inac=0&index_postcard=0&label_click=undef&no_rooms=1&postcard=0&raw_dest_type=city&raw_dest_type=city&raw_dest_type=city&room1=A%2CA&sb_price_type=total&search_selected=1&search_selected=1&search_selected=1&src=searchresults&src_elem=sb&ss=San%20Diego%2C%20California%2C%20USA&ss_all=0&ss_raw=San%20Diego&ssb=empty&sshis=0&ssne_untouched=Los%20Angeles&rows=50&offset=150',
        'https://www.booking.com/searchresults.html?aid=304142&label=gen173nr-1DCAEoggJCAlhYSDNYBHIFdXNfY2GIAQGYATG4AQfIAQzYAQPoAQH4AQKSAgF5qAID&sid=6b8c44375c385e19a40f765e54a53033&checkin_month=4&checkin_monthday=26&checkin_year=2018&checkout_month=4&checkout_monthday=27&checkout_year=2018&city=20014181&class_interval=1&dest_id=20015725&dest_id=20015725&dest_id=20015725&dest_type=city&dest_type=city&dest_type=city&from_sf=1&group_adults=2&group_children=0&label_click=undef&no_rooms=1&raw_dest_type=city&raw_dest_type=city&raw_dest_type=city&room1=A%2CA&sb_price_type=total&search_selected=1&search_selected=1&search_selected=1&src=searchresults&src_elem=sb&ss=San%20Diego%2C%20California%2C%20USA&ss_raw=San%20Diego&ssb=empty&ssne_untouched=Los%20Angeles&rows=50&offset=200',


       ]
url_file = open("urls_booking.txt","w+")
for i in range(len(url)):
    browser.get(url[i]) #navigate to the page
    time.sleep(10)
    html1 = browser.page_source
    html2 = browser.execute_script("return document.documentElement.innerHTML;")

    ids = browser.find_elements_by_xpath('.//div[@id="hotellist_inner"]/div/div/a[@href]')
    url_list = []
    for id in ids:
        url1 = id.get_attribute("href")
        print url1
        url_file.write(url1)
        url_file.write("\n")
    print len(ids)

url_file.close()



